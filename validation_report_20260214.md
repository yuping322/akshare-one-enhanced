# 接口验证报告

**验证时间**: 2026-02-14 15:42:54  
**总模块数**: 12  
**总接口数**: 37

## 验证摘要

根据验证脚本执行结果，以下是各模块接口的可用性状态：

### 1. FundFlow（资金流）- 无法验证
**状态**: ❌ 模块导入失败  
**错误**: `No module named 'akshare_one.fundflow'`  
**说明**: 模块路径配置错误，应该是 `akshare_one.modules.fundflow`

### 2. Disclosure（公告信披）- 4/4 可用
**状态**: ✅ 全部可用

| 接口 | 状态 | 返回行数 | 备注 |
|------|------|---------|------|
| get_disclosure_news | ✓ 可用 | 1 | 正常 |
| get_dividend_data | ✓ 可用 | 4 | 正常 |
| get_repurchase_data | ✓ 可用 | 50 | 正常 |
| get_st_delist_data | ✓ 可用 | 349 | 正常 |

### 3. Northbound（北向资金）- 2/3 可用
**状态**: ⚠️ 部分可用

| 接口 | 状态 | 返回行数 | 备注 |
|------|------|---------|------|
| get_northbound_flow | ✓ 可用 | 22 | 正常 |
| get_northbound_holdings | ✓ 可用 | 22 | 正常 |
| get_northbound_top_stocks | ✗ 无数据 | 0 | 返回数据为空 |

### 4. Macro（宏观数据）- 4/6 可用
**状态**: ⚠️ 部分可用

| 接口 | 状态 | 返回行数 | 备注 |
|------|------|---------|------|
| get_lpr_rate | ✓ 可用 | 1 | 正常 |
| get_pmi_index | ✓ 可用 | 1 | 正常 |
| get_cpi_data | ✗ 错误 | - | 日期解析错误: "2026年01月份" |
| get_ppi_data | ✗ 错误 | - | 日期解析错误: "2026年01月份" |
| get_m2_supply | ✓ 可用 | 1 | 正常 |
| get_shibor_rate | ✓ 可用 | 22 | 正常 |

### 5. BlockDeal（大宗交易）- 0/2 可用
**状态**: ❌ 全部失败

| 接口 | 状态 | 返回行数 | 备注 |
|------|------|---------|------|
| get_block_deal | ✗ 错误 | - | 参数错误: '600000' |
| get_block_deal_summary | ✗ 错误 | - | 底层函数参数不匹配 |

### 6. LHB（龙虎榜）- 2/3 可用
**状态**: ⚠️ 部分可用

| 接口 | 状态 | 返回行数 | 备注 |
|------|------|---------|------|
| get_dragon_tiger_list | ✓ 可用 | 55 | 正常 |
| get_dragon_tiger_summary | ✗ 错误 | - | 参数错误: group_by='date' 无效 |
| get_dragon_tiger_broker_stats | ✓ 可用 | 10 | 正常 |

### 7. LimitUp（涨停池）- 1/3 可用
**状态**: ⚠️ 部分可用

| 接口 | 状态 | 返回行数 | 备注 |
|------|------|---------|------|
| get_limit_up_pool | ✗ 无数据 | 0 | 返回数据为空 |
| get_limit_down_pool | ✗ 错误 | - | 只能获取最近30个交易日数据 |
| get_limit_up_stats | ✓ 可用 | 31 | 正常 |

### 8. Margin（融资融券）- 0/2 可用
**状态**: ❌ 全部失败

| 接口 | 状态 | 返回行数 | 备注 |
|------|------|---------|------|
| get_margin_data | ✗ 错误 | - | 底层函数参数不匹配 |
| get_margin_summary | ✗ 错误 | - | 底层函数参数不匹配 |

### 9. Pledge（股权质押）- 1/2 可用
**状态**: ⚠️ 部分可用

| 接口 | 状态 | 返回行数 | 备注 |
|------|------|---------|------|
| get_equity_pledge | ✗ 错误 | - | 底层函数参数不匹配 |
| get_equity_pledge_ratio_rank | ✓ 可用 | 10 | 正常 |

### 10. Restricted（限售解禁）- 0/2 可用
**状态**: ❌ 全部失败

| 接口 | 状态 | 返回行数 | 备注 |
|------|------|---------|------|
| get_restricted_release | ✗ 无数据 | 0 | 返回数据为空 |
| get_restricted_release_calendar | ✗ 错误 | - | SSL连接错误 |

### 11. Goodwill（商誉）- 0/3 可用
**状态**: ❌ 全部失败

| 接口 | 状态 | 返回行数 | 备注 |
|------|------|---------|------|
| get_goodwill_data | ✗ 无数据 | 0 | 返回数据为空 |
| get_goodwill_impairment | ✗ 错误 | - | NoneType错误 |
| get_goodwill_by_industry | ✗ 错误 | - | 列名错误 |

### 12. ESG（ESG评级）- 验证超时
**状态**: ⏱️ 验证超时

| 接口 | 状态 | 返回行数 | 备注 |
|------|------|---------|------|
| get_esg_rating | ⏱️ 超时 | - | 执行时间过长（>2分钟） |
| get_esg_rating_rank | 未测试 | - | 前一个接口超时 |

## 总体统计

- **总接口数**: 37
- **完全可用**: 10 (27.0%)
- **无数据**: 4 (10.8%)
- **错误**: 15 (40.5%)
- **超时**: 1 (2.7%)
- **未测试**: 7 (18.9%) - 包括FundFlow的7个接口

## 主要问题分类

### 1. 模块导入问题
- **FundFlow模块**: 导入路径错误，需要修正验证脚本

### 2. 日期解析问题
- **CPI数据**: 无法解析 "2026年01月份" 格式
- **PPI数据**: 无法解析 "2026年01月份" 格式
- **建议**: 更新日期解析逻辑以支持中文日期格式

### 3. 底层API参数不匹配
- **BlockDeal**: `stock_dzjy_sctj()` 参数不匹配
- **Margin**: `stock_margin_detail_sse()` 和 `stock_margin_sse()` 参数不匹配
- **Pledge**: `stock_gpzy_pledge_ratio_detail_em()` 参数不匹配
- **建议**: 检查akshare底层API变化，更新封装层

### 4. 数据可用性问题
- **Northbound top stocks**: 特定日期无数据
- **LimitUp pool**: 特定日期无数据
- **Restricted release**: 特定股票无解禁数据
- **Goodwill data**: 特定股票无商誉数据
- **建议**: 使用更近期的日期或不同的测试参数

### 5. 参数验证问题
- **LHB summary**: `group_by='date'` 不是有效值
- **LimitDown pool**: 日期范围限制（仅支持最近30天）
- **建议**: 更新验证配置使用正确的参数值

### 6. 网络/连接问题
- **Restricted calendar**: SSL连接错误
- **建议**: 重试或检查网络连接

### 7. 性能问题
- **ESG rating**: 执行时间过长
- **建议**: 优化查询参数或增加超时时间

## 建议措施

### 立即修复（高优先级）
1. 修正FundFlow模块的导入路径
2. 修复日期解析问题（CPI/PPI）
3. 更新底层API参数映射（BlockDeal, Margin, Pledge）
4. 修正LHB summary的group_by参数

### 短期改进（中优先级）
5. 更新验证配置使用更合适的测试参数
6. 优化ESG接口的查询性能
7. 添加重试机制处理网络错误

### 长期优化（低优先级）
8. 定期监控akshare底层API变化
9. 建立自动化验证流程
10. 改进错误处理和日志记录

## 结论

当前37个接口中，约27%完全可用，但有多个模块存在参数不匹配、日期解析等问题。建议优先修复高优先级问题，特别是模块导入和底层API参数映射问题，以提高整体接口可用率。
